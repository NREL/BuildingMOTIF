# Air-Side

relief-fan:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Exhaust_Fan .
  dependencies:
  - template: supply-fan
    args: {"name": "name"}

return-fan:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Return_Fan .
  dependencies:
  - template: supply-fan
    args: {"name": "name"}

# TODO: can I "compose" templates, for instance to require
# that the frequency command point has an external reference?
# I don't want to have to duplicate a template for each point as a result
# Much easier to just "join" my template w/ another. Kind of like a mix-in?

# component of 4.6, 4.7, 4.8, 4.12
supply-fan:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Supply_Fan ;
      brick:hasPart p:fan_motor .
  dependencies:
    - template: fan-motor
      args: {"name": "fan_motor"}

fan-motor:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Motor ;
      brick:hasPoint p:start_stop, p:speed, p:status .
  optional: ['status']
  dependencies:
    - template: https://brickschema.org/schema/Brick#Frequency_Command
      library: https://brickschema.org/schema/1.4/Brick
      args: {"name": "speed"}
    - template: https://brickschema.org/schema/Brick#Start_Stop_Command
      library: https://brickschema.org/schema/1.4/Brick
      args: {"name": "start_stop"}
    - template: https://brickschema.org/schema/Brick#Frequency_Command
      library: https://brickschema.org/schema/1.3/Brick
      args: {"name": "speed"}
    - template: https://brickschema.org/schema/Brick#Fan_Status
      library: https://brickschema.org/schema/1.4/Brick
      args: {"name": "status"}

damper:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Damper ;
      brick:hasPoint p:dmppos .
  dependencies:
  - template: https://brickschema.org/schema/Brick#Damper_Position_Command
    library: https://brickschema.org/schema/1.4/Brick
    args: {"name": "dmppos"}

# component of 4.6, 4.7, 4.8, 4.12
filter:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Filter ;
      brick:hasPoint p:pressure_drop .
  optional: ['pressure_drop']
  dependencies:
    - template: https://brickschema.org/schema/Brick#Filter_Differential_Pressure_Sensor
      library: https://brickschema.org/schema/1.3/Brick
      args: {"name": "pressure_drop"}

# component of 4.6, 4.8, 4.12
cooling-coil:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Cooling_Coil ;
      brick:hasPoint p:cooling_signal .
  dependencies:
    - template: https://brickschema.org/schema/Brick#Cooling_Command
      library: https://brickschema.org/schema/1.3/Brick
      args: {"name": "cooling_signal"}

# component of 4.2, 4.3, 4.7 (required)
# component of 4.6, 4.8, 4.12 (application-specific)
heating-coil:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Heating_Coil ;
      brick:hasPoint p:heating_signal .
  dependencies:
  - template: https://brickschema.org/schema/Brick#Position_Command
    library: https://brickschema.org/schema/1.3/Brick
    args: {"name": "heating_signal"}

# component of 4.1, 4.2, 4.3, 4.4, 4.5, 4.8, 4.12
thermostat:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Thermostat ;
      brick:hasPoint p:zone_temperature, p:local_override, p:setpoint_adjustment .
  optional: ['local_override', 'setpoint_adjustment']
  dependencies:
    - template: https://brickschema.org/schema/Brick#Zone_Air_Temperature_Sensor
      library: https://brickschema.org/schema/1.3/Brick
      args: {"name": "zone_temperature"}
    - template: https://brickschema.org/schema/Brick#Override_Command
      library: https://brickschema.org/schema/1.3/Brick
      args: {"name": "local_override"}
    - template: https://brickschema.org/schema/Brick#Differential_Air_Temperature_Setpoint
      library: https://brickschema.org/schema/1.3/Brick
      args: {"name": "setpoint_adjustment"}

# component of 4.1, 4.2, 4.3, 4.4, 4.5, 4.8, 4.12 (systems serving a single zone)
zone:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:HVAC_Zone ;
      brick:hasPoint p:occupancy_sensor, p:window_switch, p:zone_co2_sensor .
  optional: ['window_switch', 'zone_co2_sensor']
  dependencies:
    - template: https://brickschema.org/schema/Brick#Occupancy_Sensor
      library: https://brickschema.org/schema/1.3/Brick
      args: {"name": "occupancy_sensor"}
    - template: https://brickschema.org/schema/Brick#Open_Close_Status
      library: https://brickschema.org/schema/1.3/Brick
      args: {"name": "window_switch"}
    - template: https://brickschema.org/schema/Brick#CO2_Level_Sensor
      library: https://brickschema.org/schema/1.3/Brick
      args: {"name": "zone_co2_sensor"}

# Water-Side

# Pumps
# components of 4.10.2, 4.10.5, 4.11.2

constant-speed-pump-motor:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Motor ;
      brick:hasPoint p:start, p:status .
  dependencies:
    - template: https://brickschema.org/schema/Brick#On_Command
      library: https://brickschema.org/schema/1.3/Brick
      args: {'name': 'start'}
    - template: https://brickschema.org/schema/Brick#On_Off_Status
      library: https://brickschema.org/schema/1.3/Brick
      args: {'name': 'status'}

variable-speed-pump-motor:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Variable_Frequency_Drive ;
      brick:hasPoint p:start, p:status, p:speed, p:alarm .
  optional: ['pump-alarm']
  dependencies:
    - template: https://brickschema.org/schema/Brick#On_Command
      library: https://brickschema.org/schema/1.3/Brick
      args: {'name': 'start'}
    - template: https://brickschema.org/schema/Brick#On_Off_Status
      library: https://brickschema.org/schema/1.3/Brick
      args: {'name': 'status'}
    - template: https://brickschema.org/schema/Brick#Speed_Command
      library: https://brickschema.org/schema/1.3/Brick
      args: {'name': 'speed'}
    - template: https://brickschema.org/schema/Brick#Fault_Status
      library: https://brickschema.org/schema/1.3/Brick
      args: {'name': 'alarm'}

constant-speed-pump:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Pump ;
      brick:hasPart p:constant-speed-pump-motor ;
      brick:hasPoint p:dp .
  optional: ['dp']
  dependencies:
    - template: constant-speed-pump-motor
      args: {'name': 'constant-speed-pump-motor'}
    - template: https://brickschema.org/schema/Brick#Differential_Pressure_Sensor
      library: https://brickschema.org/schema/1.3/Brick
      args: {'name': 'dp'}

variable-speed-pump:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Pump ;
      brick:hasPart p:variable-speed-pump-motor ;
      brick:hasPoint p:dp .
  optional: ['dp']
  dependencies:
    - template: variable-speed-pump-motor
      args: {'name': 'variable-speed-pump-motor'}
    - template: https://brickschema.org/schema/Brick#Differential_Pressure_Sensor
      library: https://brickschema.org/schema/1.3/Brick
      args: {'name': 'dp'}

# Valves
# component of 4.10.3 and 4.11.3
min-flow-bypass-valve:
  body: >
    @prefix p: <urn:___param___#> .
    @prefix brick: <https://brickschema.org/schema/Brick#> .
    p:name a brick:Bypass_Valve ;
      brick:hasPoint p:valve-position-cmd .
  dependencies:
    - template: https://brickschema.org/schema/Brick#Valve_Position_Command
      library: https://brickschema.org/schema/1.3/Brick
      args: {'name': 'valve-position-cmd'}
